{"ast":null,"code":"import React,{useState,useContext}from'react';import\"./Booking.css\";import{Form,FormGroup,ListGroup,ListGroupItem,Button}from\"reactstrap\";import{useNavigate}from\"react-router-dom\";import{AuthContext}from'../../context/AuthContext';import{BASE_URL}from'../../utils/config';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Booking=_ref=>{let{tour,avgRating}=_ref;const{price,reviews,title}=tour;const navigate=useNavigate();const{user}=useContext(AuthContext);const[booking,setBooking]=useState({userId:user&&user._id,userEmail:user&&user.email,tourName:title,fullName:'',phone:'',guestSize:1,bookAt:''});const handleChange=e=>{setBooking(prev=>({...prev,[e.target.id]:e.target.value}));};const serviceFee=10;const totalAmount=Number(price)*Number(booking.guestSize)+Number(serviceFee);const handleClick=async e=>{e.preventDefault();console.log(booking);try{if(!user||user===undefined||user===null){return alert(\"Please sign in\");}const res=await fetch(\"\".concat(BASE_URL,\"/booking\"),{method:'post',headers:{'content-type':'application/json'},credentials:'include',body:JSON.stringify(booking)});const result=await res.json();if(!res.ok){return alert(result.message);}navigate(\"/thank-you\");}catch(err){alert(err.message);}navigate(\"/thank-you\");// Add logic to send data to the server or perform other actions.\n};return/*#__PURE__*/_jsxs(\"div\",{className:\"booking\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"booking_top d-flex align-items-center justify-content-between\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"$\",price,\" \",/*#__PURE__*/_jsx(\"span\",{children:\"/per person\"})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"tour_rating d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"ri-star-s-fill\"}),\" \",avgRating===0?null:avgRating,reviews===null||reviews===void 0?void 0:reviews.length]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"booking_form\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Information\"}),/*#__PURE__*/_jsxs(Form,{className:\"booking_info_form\",onSubmit:handleClick,children:[/*#__PURE__*/_jsx(FormGroup,{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Full Name\",id:\"fullName\",required:true,onChange:handleChange})}),/*#__PURE__*/_jsx(FormGroup,{children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Phone\",id:\"phone\",required:true,onChange:handleChange})}),/*#__PURE__*/_jsxs(FormGroup,{className:\"d-flex align-items-center gap-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"date\",placeholder:\"\",id:\"bookAt\",required:true,onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Guest\",id:\"guestSize\",required:true,onChange:handleChange})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"booking_bottom\",children:[/*#__PURE__*/_jsxs(ListGroup,{children:[/*#__PURE__*/_jsx(ListGroupItem,{className:\"border-0 px-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center justify-content-between\",children:[/*#__PURE__*/_jsxs(\"h5\",{children:[\"$\",price,\" \",/*#__PURE__*/_jsx(\"i\",{className:\"ri-close-line\"}),\" 1 person\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",price]})]})}),/*#__PURE__*/_jsx(ListGroupItem,{className:\"border-0 px-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Service charge\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",serviceFee]})]})}),/*#__PURE__*/_jsx(ListGroupItem,{className:\"border-0 px-0 total\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Total\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",totalAmount.toLocaleString()]})]})})]}),/*#__PURE__*/_jsx(Button,{className:\"btn primary_btn w-100 mt-4\",style:{backgroundColor:'orange',border:'none'},onClick:handleClick,children:\"Book Now\"})]})]});};export default Booking;","map":{"version":3,"names":["React","useState","useContext","Form","FormGroup","ListGroup","ListGroupItem","Button","useNavigate","AuthContext","BASE_URL","jsx","_jsx","jsxs","_jsxs","Booking","_ref","tour","avgRating","price","reviews","title","navigate","user","booking","setBooking","userId","_id","userEmail","email","tourName","fullName","phone","guestSize","bookAt","handleChange","e","prev","target","id","value","serviceFee","totalAmount","Number","handleClick","preventDefault","console","log","undefined","alert","res","fetch","concat","method","headers","credentials","body","JSON","stringify","result","json","ok","message","err","className","children","length","onSubmit","type","placeholder","required","onChange","toLocaleString","style","backgroundColor","border","onClick"],"sources":["C:/Users/Riddhi Labde/Desktop/final wala fix/frontend/src/components/Booking/Booking.jsx"],"sourcesContent":["import React, { useState , useContext } from 'react';\r\nimport \"./Booking.css\";\r\nimport { Form, FormGroup, ListGroup, ListGroupItem, Button } from \"reactstrap\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { AuthContext } from '../../context/AuthContext';\r\nimport { BASE_URL } from '../../utils/config';\r\n\r\nconst Booking = ({ tour, avgRating }) => {\r\n    const { price, reviews, title } = tour;\r\n    const navigate = useNavigate();\r\n\r\n    const {user} = useContext(AuthContext)\r\n\r\n    const [booking, setBooking] = useState({\r\n        userId: user && user._id,\r\n        userEmail: user && user.email,\r\n        tourName: title,\r\n        fullName: '',\r\n        phone: '',\r\n        guestSize: 1,\r\n        bookAt: ''\r\n    });\r\n    \r\n\r\n    const handleChange = e => {\r\n        setBooking(prev => ({ ...prev, [e.target.id]: e.target.value }));\r\n    };\r\n\r\n    const serviceFee = 10;\r\n    const totalAmount = Number(price) * Number(booking.guestSize) + Number(serviceFee);\r\n\r\n    const handleClick = async (e) => {\r\n        e.preventDefault();\r\n\r\n        console.log(booking);\r\n        try {\r\n            if(!user || user === undefined || user === null){\r\n                return alert(\"Please sign in\")\r\n            }\r\n\r\n            const res = await fetch(`${BASE_URL}/booking`,{\r\n                method:'post',\r\n                headers:{\r\n                    'content-type':'application/json'\r\n                },\r\n                credentials:'include',\r\n                body:JSON.stringify(booking)\r\n            })\r\n\r\n            const result = await res.json()\r\n\r\n            if(!res.ok){\r\n                return alert(result.message)\r\n            }\r\n            navigate(\"/thank-you\");\r\n        } catch (err) {\r\n            alert(err.message)\r\n        }\r\n\r\n        navigate(\"/thank-you\");\r\n        // Add logic to send data to the server or perform other actions.\r\n    };\r\n\r\n    return (\r\n        <div className=\"booking\">\r\n            <header className=\"booking_top d-flex align-items-center justify-content-between\">\r\n                <h3>${price} <span>/per person</span></h3>\r\n                <span className=\"tour_rating d-flex align-items-center\">\r\n                    <i className=\"ri-star-s-fill\"></i> {avgRating === 0 ? null : avgRating}\r\n                    {reviews?.length}\r\n                </span>\r\n            </header>\r\n            {/* ===========booking form=========== */}\r\n            <div className=\"booking_form\">\r\n                <h5>Information</h5>\r\n                <Form className=\"booking_info_form\" onSubmit={handleClick}>\r\n                    <FormGroup>\r\n                        <input type=\"text\" placeholder=\"Full Name\" id=\"fullName\" required onChange={handleChange} />\r\n                    </FormGroup>\r\n                    <FormGroup>\r\n                        <input type=\"number\" placeholder=\"Phone\" id=\"phone\" required onChange={handleChange} />\r\n                    </FormGroup>\r\n                    <FormGroup className=\"d-flex align-items-center gap-3\">\r\n                        <input type=\"date\" placeholder=\"\" id=\"bookAt\" required onChange={handleChange} />\r\n                        <input type=\"number\" placeholder=\"Guest\" id=\"guestSize\" required onChange={handleChange} />\r\n                    </FormGroup>\r\n                </Form>\r\n            </div>\r\n            {/* ===========booking end=========== */}\r\n            {/* ===========booking bottom=========== */}\r\n            <div className=\"booking_bottom\">\r\n                <ListGroup>\r\n                    <ListGroupItem className=\"border-0 px-0\">\r\n                        <div className=\"d-flex align-items-center justify-content-between\">\r\n                            <h5>${price} <i className=\"ri-close-line\"></i> 1 person</h5>\r\n                            <span>${price}</span>\r\n                        </div>\r\n                    </ListGroupItem>\r\n                    <ListGroupItem className=\"border-0 px-0\">\r\n                        <div className=\"d-flex justify-content-between\">\r\n                            <h5>Service charge</h5>\r\n                            <span>${serviceFee}</span>\r\n                        </div>\r\n                    </ListGroupItem>\r\n                    <ListGroupItem className=\"border-0 px-0 total\">\r\n                        <div className=\"d-flex justify-content-between\">\r\n                            <h5>Total</h5>\r\n                            <span>${totalAmount.toLocaleString()}</span>\r\n                        </div>\r\n                    </ListGroupItem>\r\n                </ListGroup>\r\n                <Button className=\"btn primary_btn w-100 mt-4\" style={{ backgroundColor: 'orange', border: 'none' }} onClick={handleClick}>\r\n                    Book Now\r\n                </Button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Booking;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}